webpackJsonp([0],[,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s.d(t,"eventBus",function(){return _});var a=s(1),r=s(8),n=s.n(r),i=s(6),c=s(10),o=s.n(c),l=s(7),u=(s.n(l),s(11)),d=s(3),h=s.n(d),p=s(9),m=s.n(p);a.default.config.productionTip=!1,a.default.use(o.a),a.default.use(u.a),a.default.use(m.a,h.a);var _=new a.default({methods:{reloadSearchData:function(){this.$emit("newSearchRequested","search")}}});new a.default({el:"#app",router:i.a,template:"<App/>",components:{App:n.a}})},,function(e,t,s){function a(e){s(18)}var r=s(0)(s(13),s(27),a,"data-v-7d186f6c",null);e.exports=r.exports},,function(e,t,s){"use strict";var a=s(1),r=s(30),n=s(4),i=s.n(n);a.default.use(r.a),t.a=new r.a({routes:[{path:"/",name:"search",component:i.a}]})},function(e,t){},function(e,t,s){function a(e){s(17)}var r=s(0)(s(12),s(25),a,null,null);e.exports=r.exports},,,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(4);s.n(a);t.default={name:"app"}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(24),r=s.n(a),n=s(23),i=s.n(n),c=s(22),o=s.n(c),l=s(3),u=s.n(l);t.default={name:"search",components:{recallListResults:r.a,neissListResults:i.a,searchAggregation:o.a},data:function(){return{stats:{took:Number,total:Number,maxScore:Number,resultCount:Number},searchSettings:{size:10,from:Number,dataType:String},dataContainer:{recalls:[],incidentReports:[],neiss:[],violations:[]},aggs:null,aggregations:{artifactType:[],artifactSource:[]},response:null,dataTypes:[],searchquery:null,hasResults:!1,isSearchComplete:!1,searchButtonclicked:!1,fetchStatus:null,responseEvent:null,wasComponentUpdated:!1}},watch:{searchquery:function(e){var t=this;t.fetchStatus="Waiting for input...",t.search(e)}},computed:{showSpinner:function(){return this.searchButtonclicked&&!this.isSearchComplete&&null===this.fetchStatus},noResult:function(){return this.searchButtonclicked&&!this.hasResults&&null!=this.searchquery}},methods:{displayWhenHasResults:function(){return"Found: "+this.stats.total+" records in "+this.stats.took+" ms, Max Relevance Score : "+this.stats.maxscore+", Displaying top: "+this.stats.resultCount+" results containing "+this.searchquery},searchButtonclickedOrSearchqueryNullDisplay:function(){return this.searchquery?"Query="+this.searchquery:"Please enter a query"},resetFormItems:function(){var e=this;e.searchButtonclicked=!0,e.isSearchComplete=!1,e.hasResults=!1,e.stats.resultCount=0,e.dataContainer.recalls=[],e.dataContainer.neiss=[],e.fetchStatus=null},filterResponseData:function(e){var t=this,s=e.data;t.stats.took=s.results.took,t.stats.total=s.results.hits.total,t.stats.maxscore=s.results.hits.max_score,t.stats.resultCount=Math.ceil(s.docCount/s.pages),t.response=s.results,t.aggs=s.results.aggregations,this.hasResults=!0},search:u.a.debounce(function(e){var t=this;t.resetFormItems();if(0==e.length||null===e.length)return void(t.isSearchComplete=!0);t.$http.post("http://localhost:3000/search",{FullText:this.searchquery,Filter:{Source:"",Type:"",StartDate:"01-01-1970",EndDate:"01-01-2018"},StartPage:"1",NumPerPage:t.searchSettings.size}).then(function(e){e.data.results.hits.total>0&&t.filterResponseData(e),t.isSearchComplete=!0}).catch(function(e){console.log("could not reach API "+e),this.fetchStatus="Communication with the back end server failed...please try again later"})},600)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"SearchAggregation",components:{},props:{aggs:{required:!0}},computed:{typePartitions:function(){var e=this;return this.aggs.artifact_type.buckets.forEach(function(t){return e.aggregations.artifactType.push({key:t.key,count:t.doc_count})}),this.aggregations.artifactType},sourcePartitions:function(){var e=this;return this.aggs.artifact_source.buckets.forEach(function(t){return e.aggregations.artifactSource.push({key:t.key,count:t.doc_count})}),this.aggregations.artifactSource}},data:function(){return{aggsCheckboxes:[],aggregations:{artifactType:[],artifactSource:[]}}},methods:{}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(2);t.default={name:"neissListResults",components:{},props:{response:{required:!1}},computed:{filteredNeissData:function(){var e=this;e.neiss=[];var t=e.response.hits.hits;console.log(t);for(var s=0;s<t.length;s++){var a=t[s]._source;"neissreport"===t[s]._type&&e.neiss.push(a)}return e.neiss}},data:function(){return{neiss:[]}},methods:{},created:function(){console.log("i was just created"),a.eventBus.$on("newSearchRequested",function(e){console.log(e)})}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s(2);t.default={name:"recallListResults",components:{},props:{response:{required:!1}},computed:{filteredRecallData:function(){var e=this;e.recall=[];for(var t=e.response.hits.hits,s=0;s<t.length;s++){var a=t[s]._source;"recall"===t[s]._type&&e.recall.push(a)}return e.recall}},data:function(){return{recall:[],searchData:null}},methods:{filterbyDataSetType:function(e){var t=this;t.recall=[];for(var s=e.hits.hits,a=0;a<s.length;a++){var r=s[a]._source,n=s[a]._type;console.log(r),"recall"===n&&t.recall.push(r)}return t.recall}},created:function(){console.log("was just created")}}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,s){e.exports=s.p+"static/img/logo.939f93b.png"},function(e,t,s){var a=s(0)(s(14),s(26),null,null,null);e.exports=a.exports},function(e,t,s){function a(e){s(20)}var r=s(0)(s(15),s(29),a,null,null);e.exports=r.exports},function(e,t,s){function a(e){s(19)}var r=s(0)(s(16),s(28),a,null,null);e.exports=r.exports},function(e,t,s){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{id:"app"}},[a("img",{attrs:{src:s(21)}}),e._v(" "),a("md-boards",{attrs:{"md-auto":!0,"md-infinite":!1,"md-duration":2e4,"md-swipeable":!0,"md-controls":!0}},[a("md-board",{attrs:{id:"slide1"}},[a("h4",[e._v("Welcome to the unified open data search tool")])]),e._v(" "),a("md-board",{attrs:{id:"slide2"}},[a("h4",[e._v("\r\n      You can start by looking at our data inventories"),a("md-icon",{staticClass:"md-size-1x md-accent"},[e._v("view_day")]),e._v(" and their discriptions.\r\n    ")],1)]),e._v(" "),a("md-board",{attrs:{id:"slide3"}},[a("h4",[e._v("You can also navigate to your reporting\r\n  section to generate "),a("md-icon",{staticClass:"md-size-1x md-accent"},[e._v("receipt")]),e._v(" reports,\r\n   "),a("md-icon",{staticClass:"md-size-1x md-accent"},[e._v("timeline")]),e._v("\r\n  charts and graphs.")],1)])],1),e._v(" "),a("router-view")],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"searchAggs"}},[e._l(e.typePartitions,function(t){return s("span",{key:t.key},[s("span",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.aggsCheckboxes,expression:"aggsCheckboxes"}],attrs:{type:"checkbox",id:"type"},domProps:{value:t.key,checked:Array.isArray(e.aggsCheckboxes)?e._i(e.aggsCheckboxes,t.key)>-1:e.aggsCheckboxes},on:{__c:function(s){var a=e.aggsCheckboxes,r=s.target,n=!!r.checked;if(Array.isArray(a)){var i=t.key,c=e._i(a,i);n?c<0&&(e.aggsCheckboxes=a.concat(i)):c>-1&&(e.aggsCheckboxes=a.slice(0,c).concat(a.slice(c+1)))}else e.aggsCheckboxes=n}}}),e._v(" "),s("label",{attrs:{for:"type-check"}},[e._v(e._s(t.key)+"("+e._s(t.count)+")")])])])}),e._v(" "),e._l(e.sourcePartitions,function(t){return s("span",{key:t.key},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.aggsCheckboxes,expression:"aggsCheckboxes"}],attrs:{type:"checkbox",id:"artifactsource"},domProps:{value:t.key,checked:Array.isArray(e.aggsCheckboxes)?e._i(e.aggsCheckboxes,t.key)>-1:e.aggsCheckboxes},on:{__c:function(s){var a=e.aggsCheckboxes,r=s.target,n=!!r.checked;if(Array.isArray(a)){var i=t.key,c=e._i(a,i);n?c<0&&(e.aggsCheckboxes=a.concat(i)):c>-1&&(e.aggsCheckboxes=a.slice(0,c).concat(a.slice(c+1)))}else e.aggsCheckboxes=n}}}),e._v(" "),s("label",{attrs:{for:"source-check"}},[e._v(e._s(t.key)+"("+e._s(t.count)+")")])])}),e._v(" "),s("p",[e._v(e._s(e.aggsCheckboxes))])],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"search"}},[s("md-card",{attrs:{"md-with-hover":""}},[s("md-card-header",[e._v(" Search Open Datasets")]),e._v(" "),s("md-card-actions",[s("md-input-container",[s("label",[e._v("Search")]),e._v(" "),s("md-input",{attrs:{placeholder:"Search by type, title or description etc. ",id:"searchquery"},model:{value:e.searchquery,callback:function(t){e.searchquery=t},expression:"searchquery"}}),e._v(" "),s("a",{attrs:{href:"#"},on:{click:function(t){e.search(e.searchquery)}}},[s("md-icon",{staticClass:"md-size-1x md-accent"},[e._v("search")])],1)],1)],1)],1),e._v(" "),s("br"),e._v(" "),null!=e.fetchStatus?s("p",[e._v(e._s(e.fetchStatus))]):e._e(),e._v(" "),e.hasResults?s("p",[e._v(e._s(e.displayWhenHasResults()))]):e._e(),e._v(" "),e.noResult&&e.isSearchComplete&&null==e.fetchStatus?s("p",[s("md-icon",{staticClass:"md-size-1x md-warn"},[e._v("help")]),e._v(" search returned no result please try another query")],1):e._e(),e._v(" "),e.searchButtonclicked&&null!==e.searchquery?e._e():s("p",[s("md-icon",{staticClass:"md-size-1x md-warn"},[e._v("help_outline")]),e._v("\n    "+e._s(e.searchButtonclickedOrSearchqueryNullDisplay())+"\n  ")],1),e._v(" "),e.hasResults?s("search-aggregation",{attrs:{aggs:e.aggs}}):e._e(),e._v(" "),e.showSpinner?s("md-spinner",{staticClass:"md-warn",attrs:{"md-size":60,"md-indeterminate":""}}):e._e(),e._v(" "),e.hasResults?s("neiss-list-results",{attrs:{response:e.response}}):e._e(),e._v(" "),e.hasResults?s("recall-list-results",{attrs:{response:e.response}}):e._e()],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("md-ink-ripple"),e._v(" "),s("md-card",e._l(e.filteredRecallData,function(t){return s("md-list",{key:t.recallNumber},[s("md-list-item",[s("md-avatar",[s("md-icon",{staticClass:"md-size-2x green"},[e._v("cached")])],1),e._v(" "),s("div",{staticClass:"md-list-text-container"},[s("h2",[s("a",{attrs:{href:t.uRL,target:"_blank"}},[e._v(e._s(t.title))])]),e._v(" "),s("span",[e._v("Recall Date: "+e._s(t.recallDate))]),e._v(" "),s("p",[e._v(e._s(t.description))]),e._v(" "),s("md-list-item",{attrs:{"md-expand-multiple":""}},[s("span",[e._v("Products")]),e._v(" "),s("md-list-expand",e._l(t.products,function(t){return s("md-list",[s("md-list-item",{staticClass:"md-dense md-inset "},[s("span",[e._v(e._s(t.type))])])],1)}))],1),e._v(" "),s("md-list-item",{attrs:{"md-expand-multiple":""}},[s("span",[e._v("Injuries")]),e._v(" "),s("md-list-expand",e._l(t.injuries,function(t){return s("md-list",[s("md-list-item",{staticClass:"md-inset"},[s("span",[e._v(e._s(t.name))])])],1)}))],1)],1),e._v(" "),s("a",{staticClass:"md-icon-button md-list-action",attrs:{href:t.uRL,target:"_blank"}},[s("md-icon",{staticClass:"md-primary"},[e._v("arrow_forward")])],1)],1),e._v(" "),s("md-divider",{staticClass:"md-inset"})],1)}))],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("md-card",e._l(e.filteredNeissData,function(t){return s("md-list",{key:t.cpscCaseNumber},[s("md-list-item",[s("md-avatar",[s("md-icon",{staticClass:"md-size-2x md-primary"},[e._v("accessibility")])],1),e._v(" "),s("div",{staticClass:"md-list-text-container"},[s("h2",[s("a",{attrs:{href:"#",target:"_blank"}},[e._v("\n             "+e._s(t.title)+"\n              ")])]),e._v(" "),s("span",[e._v("Treatment Date: "+e._s(t.treatmentDate))]),e._v(" "),s("p",[e._v(e._s(t.narrative.join().toLowerCase()))])])],1),e._v(" "),s("md-divider",{staticClass:"md-inset"})],1)}))],1)},staticRenderFns:[]}},,,,function(e,t){}],[2]);
//# sourceMappingURL=app.5992cd7f256d0c5f9ba4.js.map