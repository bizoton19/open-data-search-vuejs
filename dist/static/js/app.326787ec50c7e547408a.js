webpackJsonp([0],[function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),s.d(e,"eventBus",function(){return _});var a=s(2),r=s(8),n=s.n(r),i=s(6),c=s(10),o=s.n(c),l=s(7),u=(s.n(l),s(11)),d=s(3),p=s.n(d),h=s(9),m=s.n(h);a.default.config.productionTip=!1,a.default.use(o.a),a.default.use(u.a),a.default.use(m.a,p.a);var _=new a.default({methods:{reloadSearchData:function(){this.$emit("newSearchRequested","search")}}});new a.default({el:"#app",router:i.a,template:"<App/>",components:{App:n.a}})},,,,function(t,e,s){var a=s(1)(s(13),s(23),null,null,null);t.exports=a.exports},,function(t,e,s){"use strict";var a=s(2),r=s(26),n=s(4),i=s.n(n);a.default.use(r.a),e.a=new r.a({routes:[{path:"/",name:"search",component:i.a}]})},function(t,e){},function(t,e,s){function a(t){s(16)}var r=s(1)(s(12),s(22),a,null,null);t.exports=r.exports},,,,function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(4);s.n(a);e.default={name:"app"}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(21),r=s.n(a),n=s(20),i=s.n(n),c=s(3),o=s.n(c);s(0);e.default={name:"search",components:{recallListResults:r.a,neissListResults:i.a},data:function(){return{stats:{took:Number,total:Number,maxScore:Number,resultCount:Number},searchSettings:{size:10,from:Number,dataType:String},dataContainer:{recalls:[],incidentReports:[],neiss:[],violations:[]},aggregations:{artifactType:{key:String,count:String},artifactSource:{key:String,count:String}},response:null,dataTypes:[],searchquery:null,hasResults:!1,isSearchComplete:!1,searchButtonclicked:!1,fetchStatus:null,responseEvent:null,wasComponentUpdated:!1}},watch:{searchquery:function(t){var e=this;e.fetchStatus="Waiting for input...",e.search(t)}},computed:{noResult:function(){return this.searchButtonclicked&&!this.hasResults&&null!=this.searchquery}},methods:{displayWhenHasResults:function(){return"Found: "+this.stats.total+" records in "+this.stats.took+" ms, Max Relevance Score : "+this.stats.maxscore+", Displaying top: "+this.stats.resultCount+" results containing "+this.searchquery},searchButtonclickedOrSearchqueryNullDisplay:function(){return this.searchquery?"Query="+this.searchquery:"Please enter a query"},resetFormItems:function(){var t=this;t.searchButtonclicked=!0,t.isSearchComplete=!1,t.hasResults=!1,t.stats.resultCount=0,t.dataContainer.recalls=[],t.dataContainer.neiss=[],t.fetchStatus=null},filterResponseData:function(t){var e=this,s=t.data;e.stats.took=s.results.took,e.stats.total=s.results.hits.total,e.stats.maxscore=s.results.hits.max_score,e.stats.resultCount=Math.ceil(s.docCount/s.pages),e.aggregations.artifactType.key=s.results.aggregations.artifact_type.buckets[0].key,e.aggregations.artifactType.count=s.results.aggregations.artifact_type.buckets[0].doc_count,e.aggregations.artifactSource.key=s.results.aggregations.artifact_source.buckets[0].key,e.aggregations.artifactSource.count=s.results.aggregations.artifact_source.buckets[0].doc_count,e.response=s.results,this.hasResults=!0,e.isSearchComplete=!0},search:o.a.debounce(function(t){var e=this;e.resetFormItems();if(0==t.length||null===t.length)return void(e.isSearchComplete=!0);e.$http.post("/search",{FullText:this.searchquery,Filter:{Source:"",Type:"",StartDate:"01-01-1970",EndDate:"01-01-2018"},StartPage:"1",NumPerPage:e.searchSettings.size}).then(function(t){e.filterResponseData(t)}).catch(function(t){console.log("could not reach API "+t),this.fetchStatus="Communication with the back end server failed...please try again later"})},450)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(0);e.default={name:"neissListResults",components:{},props:{response:{required:!1}},computed:{filteredNeissData:function(){var t=this;t.neiss=[];var e=t.response.hits.hits;console.log(e);for(var s=0;s<e.length;s++){var a=e[s]._source;"neiss"===e[s]._type&&t.neiss.push(a)}return t.neiss}},data:function(){return{neiss:[]}},methods:{},created:function(){console.log("i was just created"),a.eventBus.$on("newSearchRequested",function(t){console.log(t)})}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s(0);e.default={name:"recallListResults",components:{},props:{response:{required:!1}},computed:{filteredRecallData:function(){var t=this;t.recall=[];for(var e=t.response.hits.hits,s=0;s<e.length;s++){var a=e[s]._source;"recall"===e[s]._type&&t.recall.push(a)}return t.recall}},data:function(){return{recall:[],searchData:null}},methods:{filterbyDataSetType:function(t){var e=this;e.recall=[];for(var s=t.hits.hits,a=0;a<s.length;a++){var r=s[a]._source,n=s[a]._type;console.log(r),"recall"===n&&e.recall.push(r)}return e.recall}},created:function(){console.log("was just created")}}},function(t,e){},function(t,e){},function(t,e){},function(t,e,s){t.exports=s.p+"static/img/logo.939f93b.png"},function(t,e,s){function a(t){s(18)}var r=s(1)(s(14),s(25),a,null,null);t.exports=r.exports},function(t,e,s){function a(t){s(17)}var r=s(1)(s(15),s(24),a,null,null);t.exports=r.exports},function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",attrs:{id:"app"}},[a("img",{attrs:{src:s(19)}}),t._v(" "),a("md-boards",{attrs:{"md-auto":!0,"md-infinite":!1,"md-duration":2e4,"md-swipeable":!0,"md-controls":!0}},[a("md-board",{attrs:{id:"slide1"}},[a("h4",[t._v("Welcome to the unified open data search tool")])]),t._v(" "),a("md-board",{attrs:{id:"slide2"}},[a("h4",[t._v("\r\n      You can start by looking at our data inventories"),a("md-icon",{staticClass:"md-size-1x md-accent"},[t._v("view_day")]),t._v(" and their discriptions.\r\n    ")],1)]),t._v(" "),a("md-board",{attrs:{id:"slide3"}},[a("h4",[t._v("You can also navigate to your reporting\r\n  section to generate "),a("md-icon",{staticClass:"md-size-1x md-accent"},[t._v("receipt")]),t._v(" reports,\r\n   "),a("md-icon",{staticClass:"md-size-1x md-accent"},[t._v("timeline")]),t._v("\r\n  charts and graphs.")],1)])],1),t._v(" "),a("router-view")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"search"}},[s("md-card",{attrs:{"md-with-hover":""}},[s("md-card-header",[t._v(" Search Open Datasets")]),t._v(" "),s("md-card-actions",[s("md-input-container",[s("label",[t._v("Search")]),t._v(" "),s("md-input",{attrs:{placeholder:"Search by type, title or description etc. ",id:"searchquery"},model:{value:t.searchquery,callback:function(e){t.searchquery=e},expression:"searchquery"}}),t._v(" "),s("a",{attrs:{href:"#"},on:{click:function(e){t.search(t.searchquery)}}},[s("md-icon",{staticClass:"md-size-1x md-accent"},[t._v("search")])],1)],1)],1)],1),t._v(" "),s("br"),t._v(" "),null!=t.fetchStatus?s("p",[t._v(t._s(t.fetchStatus))]):t._e(),t._v(" "),t.hasResults?s("p",[t._v(t._s(t.displayWhenHasResults()))]):t._e(),t._v(" "),t.noResult&&t.isSearchComplete&&null==t.fetchStatus?s("p",[s("md-icon",{staticClass:"md-size-1x md-warn"},[t._v("help")]),t._v(" search returned no result please try another query")],1):t._e(),t._v(" "),t.searchButtonclicked&&null!==t.searchquery?t._e():s("p",[s("md-icon",{staticClass:"md-size-1x md-warn"},[t._v("help_outline")]),t._v("\n    "+t._s(t.searchButtonclickedOrSearchqueryNullDisplay())+"\n  ")],1),t._v(" "),t.hasResults?s("p",[s("md-chip",[t._v("Category:"+t._s(t.aggregations.artifactType.key)+"("+t._s(t.aggregations.artifactType.count)+")")]),t._v(" "),s("md-chip",[t._v("Source:"+t._s(t.aggregations.artifactSource.key)+"("+t._s(t.aggregations.artifactSource.count)+")")])],1):t._e(),t._v(" "),t.searchButtonclicked&&!t.isSearchComplete&&null===t.fetchStatus?s("md-spinner",{staticClass:"md-warn",attrs:{"md-size":60,"md-indeterminate":""}}):t._e(),t._v(" "),t.hasResults?s("recallListResults",{attrs:{response:t.response}}):t._e(),t._v(" "),t.hasResults?s("neissListResults",{attrs:{response:t.response}}):t._e()],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h3",[t._v("Recalls")]),t._v(" "),s("md-ink-ripple"),t._v(" "),s("md-card",t._l(t.filteredRecallData,function(e){return s("md-list",{key:e.recallNumber},[s("md-list-item",[s("md-avatar",[s("md-icon",{staticClass:"md-size-2x green"},[t._v("cached")])],1),t._v(" "),s("div",{staticClass:"md-list-text-container"},[s("h2",[s("a",{attrs:{href:e.uRL,target:"_blank"}},[t._v(t._s(e.title))])]),t._v(" "),s("span",[t._v("Recall Date: "+t._s(e.recallDate))]),t._v(" "),s("p",[t._v(t._s(e.description))]),t._v(" "),s("md-list-item",{attrs:{"md-expand-multiple":""}},[s("span",[t._v("Products")]),t._v(" "),s("md-list-expand",t._l(e.products,function(e){return s("md-list",[s("md-list-item",{staticClass:"md-dense md-inset "},[s("span",[t._v(t._s(e.type))])])],1)}))],1),t._v(" "),s("md-list-item",{attrs:{"md-expand-multiple":""}},[s("span",[t._v("Injuries")]),t._v(" "),s("md-list-expand",t._l(e.injuries,function(e){return s("md-list",[s("md-list-item",{staticClass:"md-inset"},[s("span",[t._v(t._s(e.name))])])],1)}))],1)],1),t._v(" "),s("a",{staticClass:"md-icon-button md-list-action",attrs:{href:e.uRL,target:"_blank"}},[s("md-icon",{staticClass:"md-primary"},[t._v("arrow_forward")])],1)],1),t._v(" "),s("md-divider",{staticClass:"md-inset"})],1)}))],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h3",[t._v("Neiss")]),t._v(" "),s("md-card",t._l(t.filteredNeissData,function(e){return s("md-list",{key:e.cpscCaseNumber},[s("md-list-item",[s("md-avatar",[s("md-icon",{staticClass:"md-size-2x md-primary"},[t._v("accessibility")])],1),t._v(" "),s("div",{staticClass:"md-list-text-container"},[s("h2",[s("a",{attrs:{href:"#",target:"_blank"}},[t._v("\n             "+t._s(e.products[0].description.toLowerCase())+", "+t._s(e.products[1].description.toLowerCase())+"\n              ")])]),t._v(" "),s("span",[t._v("Treatment Date: "+t._s(e.treatmentDate))]),t._v(" "),s("p",[t._v(t._s(e.narrative.join().toLowerCase()))])])],1),t._v(" "),s("md-divider",{staticClass:"md-inset"})],1)}))],1)},staticRenderFns:[]}},,,,function(t,e){}],[0]);
//# sourceMappingURL=app.326787ec50c7e547408a.js.map